<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="Survey ABSA">f905bb481b42ac50122465fce54bcb9b</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"956c617dc5f34adda327256126aac9dd","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"956c617dc5f34adda327256126aac9dd"}],"goals":[{"name":"primary","trigger_id":"956c617dc5f34adda327256126aac9dd","nodes":[{"type":"StartGoal","goal_id":"primary","greeting_msg":{"type":"String","mode":"string","value":""},"id":"27ff68f3be6045628e884f702a35ba62","name":"Start"},{"type":"TerminateGoal","goal_id":"primary","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"76338f9faeff4d5ca95e61da996b788a","name":"End"},{"type":"ScriptedAction","script":"(function execute() {\n\tcom.glide.cs.survey.probability = 1;\n\tvar gr = new GlideRecord('asmt_metric_type');\n\tgr.get(vaInputs.surveyid);\n\tgr.query();vaVars.endNote = gr.end_note.toString();vaVars.introduction = gr.introduction.toString();vaVars.surveyName = gr.name.toString();vaVars.surveyVerificationMsg = vaSystem.getSurveyVerificationMessage();\n})()","id":"aaf89bd79d8f4748b9652ac607a8d347","name":"Load survey instance","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    var gr = new GlideRecord('asmt_metric_category');\n    gr.addQuery('metric_type', vaInputs.surveyid);\n    gr.query();\n    gr.next();\n\n    var surveyCategory = gr.getUniqueValue();\n\n    var gr = new GlideRecord('asmt_metric')\n    gr.addQuery('category', surveyCategory);\n    gr.orderBy('order');\n    gr.query();\n\n    var questions = [];\n    while (gr.next()) {\n        var question = {\n            sys_id: gr.getUniqueValue(),\n            scale: gr.scale + '',\n            metric: gr.sys_id + '',\n            type: gr.datatype + '',\n            display: vaSystem.getTranslation(gr, 'question', vaContext.getRequesterLang(), gr.question) + '',\n            dependsOn: gr.depends_on + '',\n            displayedWhen: gr.displayed_when + '',\n            name: gr.name + '',\n            max: gr.max + '',\n            min: gr.min + '',\n            mandatory: gr.mandatory + '',\n            field_validation: gr.field_validation + '',\n            reference_table: gr.reference_table + '',\n            condition: gr.condition + '',\n        };\n\n        // boolean and checkbox type questions use different displayed_when fields\n        var dependsOnType = gr.depends_on.datatype + '';\n        if (dependsOnType === 'boolean')\n            question['displayedWhen'] = gr.displayed_when_yesno + '';\n        else if (dependsOnType === 'checkbox')\n            question['displayedWhen'] = gr.displayed_when_checkbox + '';\n\n        questions.push(question);\n    }\n    vaVars.surveyQuestions = JSON.stringify(questions);\n    vaVars.questionCount = questions.length;\n})()","id":"3ce18a6379494f81b183ff09712c67fd","name":"Load questions","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.questionIndex++;\n    if (!(vaVars.questionCount &amp;&amp; vaVars.questionIndex &lt; vaVars.questionCount))\n        return;\n\n    var i = vaVars.questionIndex;\n    var questions = JSON.parse(vaVars.surveyQuestions);\n\n    // Set question type &amp; display value\n    vaVars.currentQuestionId = questions[i].sys_id;\n    vaVars.currentQuestionType = questions[i].type;\n    vaVars.currentQuestionMetric = questions[i].metric;\n    vaVars.currentQuestionDisplay = questions[i].display;\n    vaVars.currentQuestionMax = questions[i].max;\n    vaVars.currentQuestionMin = questions[i].min;\n    vaVars.currentQuestionMandatory = questions[i].mandatory;\n    vaVars.currentQuestionFieldValidator = questions[i].field_validation;\n    vaVars.currentQuestionReferenceTable = questions[i].reference_table;\n    vaVars.currentQuestionReferenceCondition = questions[i].condition;\n\n    // Load choices if relevant\n    if (questions[i].type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(questions[i].type) &gt; -1) {\n        questions[i].choices = getChoices(questions[i]);\n        vaVars.surveyQuestions = JSON.stringify(questions);\n    }\n})();\n\nfunction getChoices(q) {\n    var gr = new GlideRecord('asmt_metric_definition');\n    gr.addQuery('metric', q.metric);\n    gr.orderBy('order');\n    gr.query();\n\n    var choices = [];\n    while (gr.next()) {\n        choices.push({\n            sys_id: gr.getUniqueValue(),\n            display: vaSystem.getTranslation(gr, 'display', vaContext.getRequesterLang(),gr.display),\n            value: gr.getValue('value'),\n            selected: gr.getDisplayValue('selected_image'),\n            unselected: gr.getDisplayValue('unselected_image')\n        });\n    }\n    return choices;\n}","id":"8ad6ba88b08148619f4f0f133cd88a84","name":"Set next question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Out of questions?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.questionIndex &lt; vaVars.questionCount;\n})()\n"},"id":"2c453a0762364e449010243f5249f4f6","name":"No"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.questionIndex &gt;= vaVars.questionCount;\n})()\n"},"id":"8d271af03c4f4ce092c21729e243ac06","name":"Yes"}],"id":"5197185d7dde4e29ad21c903bf4461d5","goal_id":"primary"},{"type":"ScriptedAction","script":"(function execute() {\n    var answers = JSON.parse(vaVars.surveyAnswers);\n    answers[vaVars.currentQuestionId] = getInput();\n    vaVars.surveyAnswers = JSON.stringify(answers);\n})();\n\nfunction getInput() {\n    var values = {'value': null, 'Qtype': vaVars.currentQuestionType, 'displayValue':null};\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) &gt; -1) {\n        values.value = getValueIfSet(vaInputs.show_choice_question);\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_choice_question,values.value);\n    }\n\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) &gt; -1) {\n        values.value = getValueIfSet(vaInputs.show_text_input_question);\n        values.displayValue = getDisplayValueIfSet(vaInputs.show_text_input_question,values.value);\n    }\n\n    switch (vaVars.currentQuestionType) {\n        case 'imagescale':\n            values.value = getValueIfSet(vaInputs.show_image_scale_question);\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_image_scale_question,values.value);\n            var questions = JSON.parse(vaVars.surveyQuestions);\n            //stores correct displayValue, vaInputs returns display+value\n            if(vaInputs.show_image_scale_question &amp;&amp; vaInputs.show_image_scale_question != null){\n                questions[vaVars.questionIndex].choices.forEach(function(c){\n                    if(c.value === values.value)\n                        values.displayValue = c.display;\n                });\n            }\n            break;\n        case 'boolean':\n            values.value = getValueIfSet(vaInputs.show_boolean_question);\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\n            break;\n        case 'checkbox':\n            values.value= getValueIfSet(vaInputs.show_boolean_question);\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_boolean_question,values.value);\n            break;\n        case 'attachment':\n            values.value = getValueIfSet(vaInputs.show_attachment_question);\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_attachment_question,values.value);\n            break;\n        case 'date':\n            const date = getValueIfSet(vaInputs.show_date_question);\n            values.value = (date != null) ? date.toString() : null;\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_date_question,values.value);\n            break;\n        case 'datetime':\n            const dateTime = getValueIfSet(vaInputs.show_datetime_question);\n            values.value = (dateTime != null) ? dateTime.toString() : null;\n            vaInputs.show_datetime_question.setTimeZone(vaContext.getDeviceTimeZone());\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_datetime_question,values.value);\n            break;\n        case 'reference':\n            values.value = getValueIfSet(vaInputs.show_reference_question);\n            values.displayValue = getDisplayValueIfSet(vaInputs.show_reference_question,values.value);\n    }\n    return values;\n}\n\nfunction getValueIfSet(field){\n    return field &amp;&amp; field.isValueSet() ? field.getValue() : null;\n}\n\nfunction getDisplayValueIfSet(field, val){\n    if (!field || field == null)\n       return val;\n    var dv = field.getDisplayValue();\n     return dv &amp;&amp; dv.length &gt; 0  ? dv : val;\n}","id":"9b22e12cf3e14eba810780ba11449455","name":"Set answers","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Does question satisfy dependency?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.currentIsDependencySatisfied;\n})()\n"},"id":"13f6f9f8465e4c78bb5f8d46840a039d","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.currentIsDependencySatisfied;\n})()\n"},"id":"7b2060b878f0463385cf4780fe141946","name":"No"}],"id":"ef7bbe3cba264cfeb8ff1a05674c9058","goal_id":"primary"},{"type":"ScriptedAction","script":"(function execute() {\n    var i = vaVars.questionIndex;\n    var questions = JSON.parse(vaVars.surveyQuestions);\n    var q = questions[i];\n\n    var satisfied = true;\n    var hasDependency = !(!q.dependsOn);\n    vaVars.currentIsDependencySatisfied = !hasDependency || isSat(q);\n})();\n\nfunction isSat(q) {\n    var questions = JSON.parse(vaVars.surveyQuestions);\n    var answers = JSON.parse(vaVars.surveyAnswers);\n\n    var answerValid = false;\n    questions.forEach(function(question) {\n        if (question.metric !== q.dependsOn)\n            return;\n\n        var answerExists = question.sys_id in answers;\n        if (!answerExists)\n            return;\n\n        var selectedChoice = answers[question.sys_id]['value'];\n\n        if (question.type === 'boolean' || question.type === 'checkbox') {\n            if ((selectedChoice === true &amp;&amp; q.displayedWhen === '1') || (selectedChoice === false &amp;&amp; q.displayedWhen === '0'))\n                answerValid = true;\n        } else {\n            var choices = question.choices.filter(function(c) {\n                return c.value === selectedChoice;\n            });\n\n            if (choices.length &amp;&amp; choices[0].sys_id)\n                answerValid = q.displayedWhen.indexOf(choices[0].sys_id) !== -1;\n        }\n    });\n\n    return answerValid;\n}","id":"f11c7621c26e49f9aba95fbb2c99cbc1","name":"Check question dependency","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"f91b8c9e2b484a40a7e4b8154f62ed83","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"da016b4266b448efb5fab4c127561362","name":"Show boolean question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if ((vaVars.currentQuestionType === 'boolean') || (vaVars.currentQuestionType === 'checkbox')) {\n        vaInputs.show_boolean_question.setRequired(vaVars.currentQuestionMandatory);\n        return true;\n    }\n        return false;\n})()"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","script":"(function execute() {\n    if(vaInputs.savequestionstocontext == 'true'){ \n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createOrGetAssessmentWithTrigger(vaInputs.surveyid, '', gs.getUserID(), 'interaction', vaVars._interaction_record_sysid);\n        vaVars.LiveAgent_pre_assessment_instance = vaVars.surveyInstanceId;\n        vaVars.LiveAgent_pre_chat_survey_name = vaVars.surveyName;\n    } else{ \n        vaVars.surveyInstanceId = new sn_assessment_core.AssessmentCreation().createOrGetAssessmentWithTrigger(vaInputs.surveyid, '', vaVars._topic_postchat_user_id, 'interaction', vaVars._interaction_record_sysid); \n        vaVars.LiveAgent_post_assessment_instance = vaVars.surveyInstanceId;\n        vaVars.LiveAgent_post_chat_survey_name = vaVars.surveyName;    \n    }\n\n    var answers = JSON.parse(vaVars.surveyAnswers);\n    var data = {\n        sysparm_instance_id: vaVars.surveyInstanceId,\n        sysparm_action: 'submit'\n    };\n\n    var questionData = new global.TopicPreChatUtil().getQuestionData(vaVars.surveyInstanceId);\n\n    Object.keys(answers).forEach(function(q) {\n        if (answers[q] &amp;&amp; answers[q] &amp;&amp; answers[q].value != null){ \n            if (answers[q]['Qtype'] === 'boolean') {\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? '1' : '0';\n            } else if (answers[q]['Qtype'] === 'checkbox') {\n                data['ASMTQUESTION:' + questionData[q].instanceID] = (answers[q]['value'] === true) ? 'true' : '';\n            } else\n                data['ASMTQUESTION:' + questionData[q].instanceID] = answers[q]['value'];\n            if (vaInputs.savequestionstocontext == 'true')\n                saveToContext(questionData[q].name, answers[q], questionData[q].contextVar, questionData[q].type);\n        }\n        \n    });\n    var response = new global.AssessmentSubmitProcessor().processRequest(data);\n})()\n\nfunction saveToContext(name, a, contextVar, type){\n        if(contextVar != \"\") {\n            var contextVarName = contextVar;\n        } else {\n            //remove all special characters and replace spaces with _\n            var questionName = name.toString().replace(/[^a-zA-Z0-9]/g, '_').replace(/_$/,'');     \n            //append survey name to question name\n            var contextVarName = \"liveagent_\" +vaVars.surveyName +\".\"+ questionName;\n        }\n        vaVars[contextVarName] = a.value.toString();\n        //for choice questions, store response and not response index as context var\n        if (type === 'imagescale' || vaVars.choiceTypes.split(',').indexOf(type) &gt; -1) { \n             vaVars[contextVarName] = a.displayValue.toString();    \n        }\n}","id":"78aed9e578f540289dbc4fe396e90897","name":"Submit survey answers","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"e24e129250c249a9878a75139e035753","message":{"type":"String","mode":"script","value":"(function execute() {\n    if (vaVars.currentQuestionType === 'long')\n        return gs.getMessageLang('{0} (Range: {1} - {2})', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay, vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\n    else if (vaVars.currentQuestionType === 'percentage')\n        return gs.getMessageLang('{0} (Range: {1} - {2} %)', vaContext.getRequesterLang(), [vaVars.currentQuestionDisplay,vaVars.currentQuestionMin, vaVars.currentQuestionMax]);\n    else\n        return vaVars.currentQuestionDisplay;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"88d3611b425f4bcbb2852753a69585f6","name":"Show text input question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.textTypes.split(',').indexOf(vaVars.currentQuestionType) &gt; -1) {\n        vaInputs.show_text_input_question.setRequired(vaVars.currentQuestionMandatory);\n        return true;\n    } else \n        return false;\n})()"},"formatType":"Custom","validationScript":"function validate(value) {\n    // for \"skip\" which has input value as empty, long or percentage type, general string type with no validator defined\n    if ((gs.nil(value) &amp;&amp; vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\n        return {\n            valid: true,\n        }; \n\n    // for string type with validator defined, and question is not skipped\n    var validatorGr = new GlideRecord(\"sys_cs_field_script_validator\");\n    if (!validatorGr.isValid())\n\t    return {\n           valid: false,\n           error: gs.getMessageLang(\"validator table does not exist\", vaContext.getRequesterLang())\n        };\n\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\n        var scriptBuild = \"(\" + validatorGr.validator + \")('\"+ value + \"');\";\n        var isValidAnswer = eval(scriptBuild);\n        return {\n            valid: isValidAnswer,\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\n        };\n    } else {\n        return {\n            valid: false,\n            error: gs.getMessageLang(\"validator record does not exist\", vaContext.getRequesterLang())\n        };\n    }\n}"},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"{{vaVars.endNote}}"},"id":"ec047a8643df46a883575378c77233bd","name":"End note","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"{{vaVars.introduction}}"},"id":"0481412e6152484b9ff59a10fe44f981","name":"Introduction","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"b3d5a15656164fd68dc0ccbd6da114be","name":"Show choice question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.choiceTypes.split(',').indexOf(vaVars.currentQuestionType) &gt; -1) {\n        vaInputs.show_choice_question.setRequired(vaVars.currentQuestionMandatory);\n        return true;\n    }\n        return false;\n})()\n"},"variable_id":"e1deb8e0d30c437da28d9ab022dbaa9b","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()\n"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var i = vaVars.questionIndex;\n    var questions = JSON.parse(vaVars.surveyQuestions);\n    var choices = questions[i].choices;\n    var options = [];\n    for (var j = 0; j &lt; choices.length; j++) {\n        var c = choices[j];\n        options.push({\n            'label': c.display,\n            'value': c.value\n        });\n    }\n\n    return options;\n})()","no_options_found_message":{"type":"String","mode":"string","value":"No data found"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var i = vaVars.questionIndex;\n    var questions = JSON.parse(vaVars.surveyQuestions);\n    var choices = questions[i].choices;\n    var options = [];\n    for (var j = 0; j &lt; choices.length; j++) {\n        var c = choices[j];\n        options.push({\n            'label': c.display,\n            'value': c.value\n        });\n    }\n\n    return options;\n})()"}},{"type":"InputPrompt","variable_id":"9efd17ecbb934cfabb036a317c61aa69","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()\n"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"8d8c3ba65a1b48e59fefa81f6af9abad","name":"Show attachment question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.currentQuestionType === 'attachment') {\n        vaInputs.show_attachment_question.setRequired (vaVars.currentQuestionMandatory);\n        return true;\n    } else \n        return false;\n})()"},"formatType":"Text","validationScript":""},{"type":"InputPrompt","variable_id":"861966c151804bb68836a40f308c932c","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"ddec3a3a210c4c9b988b0b6962e8ad90","name":"Show date question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.currentQuestionType === 'date') {\n        vaInputs.show_date_question.setRequired (vaVars.currentQuestionMandatory);\n        return true;\n    } else \n        return false;\n})()"},"formatType":"Text","validationScript":""},{"type":"InputPrompt","variable_id":"0c01e42b8a384b0bb1e13df038d2da4a","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"58c46b71b4834bae8f7a21401fc092fc","name":"Show datetime question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.currentQuestionType === 'datetime') {\n        vaInputs.show_datetime_question.setRequired(vaVars.currentQuestionMandatory);\n        return true;\n    } else\n        return false;\n})()"},"formatType":"Text","validationScript":""},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.currentAnswerValidation = true;\n    vaVars.currentAnswerErrorMsg = '';\n\n    if (vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage')\n        validateFieldLimits();\n})();\n\nfunction validateFieldLimits() {\n\tif ((!vaInputs.show_text_input_question.isValueSet() || vaInputs.show_text_input_question.getValue().length == 0)\n\t    &amp;&amp; !vaInputs.show_text_input_question.isRequired())\n\t\treturn;\n\tvar max = vaVars.currentQuestionMax;\n\tvar min = vaVars.currentQuestionMin;\n\t\t\n\tvar value = vaInputs.show_text_input_question.getValue();\n\tvar newvalue = Number(value);\n\tif (isNaN(newvalue)) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is not a valid number. Please try again', vaContext.getRequesterLang());\n\t} else if (newvalue &gt; max || newvalue &lt; min) {vaVars.currentAnswerValidation = false;vaVars.currentAnswerErrorMsg = gs.getMessageLang('The input value is outside the valid range. Please try again', vaContext.getRequesterLang());\n\t}\n}","id":"543a3187f92f4e03848e26fee8acb00f","name":"Answer validation","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Check range","branches":[{"type":"Branch","label":"In range","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.currentAnswerValidation;\n})()"},"id":"54fd0f9fa66540c4b54c44f37f564712","name":"In range"},{"type":"Branch","label":"Out of range","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.currentAnswerValidation;\n})()"},"id":"69f72d8ffe0443e6938ce2cbd9d07d0b","name":"Out of range"}],"id":"7dce91b924a6498c86e6bc1253857566","goal_id":"primary"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentAnswerErrorMsg;\n})()"},"id":"165a1bd573254bd883338b583112ab3a","name":"Validation failed","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CarouselInputPrompt","carousel_options_script":"(function execute() {\n    var i = vaVars.questionIndex;\n    var questions = JSON.parse(vaVars.surveyQuestions);\n    var choices = questions[i].choices;\n    var options = [];\n    for (var j = 0; j &lt; choices.length; j++) {\n        var c = choices[j];\n        options.push({\n            'Name': c.display,\n            'Value': c.value,\n            'Body': c.unselected\n        });\n    }\n\n    return options;\n})()","no_options_found_message":{"type":"String","mode":"string","value":"gs.getMessageLang(\"No data found\", vaContext.getRequesterLang())"},"id":"a8991376ae65459092f66cf8adcd6352","name":"Show image scale question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if (vaVars.currentQuestionType === 'imagescale') {\n        vaInputs.show_image_scale_question.setRequired(vaVars.currentQuestionMandatory);\n        return true;\n    } else\n        return false;\n})()\n"},"variable_id":"982d6af367684c1dbea91a849f8dcaa2","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()\n"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true}},{"type":"ScriptOutputPrompt","output_type":"single_part","id":"014d1eef83ce40249d50a80c84258933","name":"Summary","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"value":{"type":"String","mode":"string","value":"(function execute() {\n      var questions = JSON.parse(vaVars.surveyQuestions);\n      var answers = JSON.parse(vaVars.surveyAnswers);\n      var questionAnswerPairs = [];\n\n      questions.forEach(function(q) {\n            var question = q.display.toString();\n            var answer = answers[q.metric];\n            var questionAnswer = answer.displayValue != null ? answer.displayValue :\n            answer.value != null ? answer.value : '';\n            var questionType = q.type + '';\n            \n            if(questionType == 'checkbox' || questionType == 'boolean'){\n                  if (questionAnswer == \"1\") {\n                        questionAnswer = \"Yes\";\n                  } else if (questionAnswer == \"0\") {\n                        questionAnswer = \"No\"\n                  }\n            }\n            if(answer){questionAnswerPairs.push({\"fieldLabel\": question, \"fieldValue\": questionAnswer});}         \n      });\n      \n      var card_data = JSON.stringify({\n            \"title\":gs.getMessageLang(\"Response Summary\", vaContext.getRequesterLang()),\n            \"fields\":questionAnswerPairs,\n      });\n\n      return vaSystem.renderCard(\"PreChat\", card_data);\n})()\n"}},{"type":"InputPrompt","variable_id":"bad1065e16054a2da96f60afed9f86d8","message":{"type":"String","mode":"string","value":"{{vaVars.surveyVerificationMsg}}"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"skippable":{"type":"Applicability","mode":"script","value":"false"},"id":"8499d4d549864b58a94713e7fa02977c","name":"Verify Response","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"},"formatType":"Text","validationScript":""},{"type":"Decision","name":"Summary Correct?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"verify_response=true"},"id":"c500654830824b3381f0e371597d7e68","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"verify_response="},"id":"fc3fbe3bf23c4b1ab4e08f8756ac761c","name":"No"}],"id":"1d44f24744844668a34e88d2fb0aec03","goal_id":"primary"},{"type":"ScriptedAction","script":"(function execute() {\n    vaVars.questionIndex = -1;\n})()","id":"a6a9e57fbd7f4853b35b40728bf0c1b3","name":"Reset Question Index","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Confirmation","branches":[{"type":"Branch","label":"Confirmation?","expression":{"type":"Applicability","mode":"query","value":"confirmationneeded=true"},"id":"33c61ba878b44bbfbb54fd26678635e4","name":"Confirmation?"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"confirmationneeded!=true"},"id":"67a79ffe30c84f5ca15bc689456b0d32","name":"No"}],"id":"afe52e689ec5471495ad29f5e25d6657","goal_id":"primary"},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"af73200e251349639110c03d95ac7d68","name":"Show reference question","goal_id":"primary","applicability":{"type":"Applicability","mode":"script","value":"(function execute() {\n    if ((vaVars.currentQuestionType === 'reference')) {\n        vaInputs.show_reference_question.setRequired(vaVars.currentQuestionMandatory);\n        return true;\n    } else\n        return false;\n})()\n"},"variable_id":"218c0a616e194cafb7901990e1be31c9","message":{"type":"String","mode":"script","value":"(function execute() {\n    return vaVars.currentQuestionDisplay;\n})()\n"},"skippable":{"type":"Applicability","mode":"script","value":"false"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":true},"expression_mode":"script","script":"(function execute() {\n    var options = [];\n    var table = vaVars.currentQuestionReferenceTable;\n    var condition = vaVars.currentQuestionReferenceCondition;\n    if (!table)\n        return options;\n \n    var taskExtensions = new TableUtils(\"task\").getTableExtensions();\n    var isTask = (taskExtensions.indexOf(table) &gt; -1) ? true : false;\n\n    var gr = new GlideRecord(table);\n    if (condition)\n        gr.addEncodedQuery(condition);\n    gr.query();\n    while (gr.next()) {\n        options.push({\n            'value': gr.sys_id + '',\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\n        });\n    }\n    return options;\n})()","no_options_found_message":{"type":"String","mode":"string","value":"No reference found"},"condition":{"type":"Condition","mode":"external_script","value":"(function execute() {\n    var options = [];\n    var table = vaVars.currentQuestionReferenceTable;\n    var condition = vaVars.currentQuestionReferenceCondition;\n    if (!table)\n        return options;\n \n    var taskExtensions = new TableUtils(\"task\").getTableExtensions();\n    var isTask = (taskExtensions.indexOf(table) &gt; -1) ? true : false;\n\n    var gr = new GlideRecord(table);\n    if (condition)\n        gr.addEncodedQuery(condition);\n    gr.query();\n    while (gr.next()) {\n        options.push({\n            'value': gr.sys_id + '',\n            'label': (isTask)? gr.number + ': ' + gr.short_description : gr.getDisplayValue()\n        });\n    }\n    return options;\n})()"}}],"edges":[{"type":"Edge","source_node_id":"b3d5a15656164fd68dc0ccbd6da114be","target_node_id":"da016b4266b448efb5fab4c127561362","id":"825c024f852443c7aa1f48a948435fda"},{"type":"Edge","source_node_id":"27ff68f3be6045628e884f702a35ba62","target_node_id":"aaf89bd79d8f4748b9652ac607a8d347","id":"84a4f43d35104e849fbf38647097a2aa"},{"type":"Edge","source_node_id":"ef7bbe3cba264cfeb8ff1a05674c9058","target_node_id":"88d3611b425f4bcbb2852753a69585f6","branch_id":"13f6f9f8465e4c78bb5f8d46840a039d","id":"cb00cbeb741e4740b852fa48b2369bae","name":"13f6f9f8465e4c78bb5f8d46840a039d"},{"type":"Edge","source_node_id":"f11c7621c26e49f9aba95fbb2c99cbc1","target_node_id":"ef7bbe3cba264cfeb8ff1a05674c9058","id":"ed42e443877c403684b8aff474739560"},{"type":"Edge","source_node_id":"8ad6ba88b08148619f4f0f133cd88a84","target_node_id":"5197185d7dde4e29ad21c903bf4461d5","id":"7861cbcf45144a7680ec632f2f0f7f8c"},{"type":"Edge","source_node_id":"aaf89bd79d8f4748b9652ac607a8d347","target_node_id":"3ce18a6379494f81b183ff09712c67fd","id":"f6d39682bfd24d3cbbcdd39b9b7d5828"},{"type":"Edge","source_node_id":"9b22e12cf3e14eba810780ba11449455","target_node_id":"8ad6ba88b08148619f4f0f133cd88a84","id":"c63d6bd392dd48daa23c79a261057fc0"},{"type":"Edge","source_node_id":"ef7bbe3cba264cfeb8ff1a05674c9058","target_node_id":"8ad6ba88b08148619f4f0f133cd88a84","branch_id":"7b2060b878f0463385cf4780fe141946","id":"3a1d998a05f44d0b9dfb2a7293fd82f4","name":"7b2060b878f0463385cf4780fe141946"},{"type":"Edge","source_node_id":"5197185d7dde4e29ad21c903bf4461d5","target_node_id":"f11c7621c26e49f9aba95fbb2c99cbc1","branch_id":"2c453a0762364e449010243f5249f4f6","id":"95f4c319557a4f9582acf8e5abbfa4ae","name":"2c453a0762364e449010243f5249f4f6"},{"type":"Edge","source_node_id":"78aed9e578f540289dbc4fe396e90897","target_node_id":"ec047a8643df46a883575378c77233bd","id":"3e1ee42b6d204adab157189d210da976"},{"type":"Edge","source_node_id":"ec047a8643df46a883575378c77233bd","target_node_id":"76338f9faeff4d5ca95e61da996b788a","id":"b86df63e82ef4a72bf276e9b702caacd"},{"type":"Edge","source_node_id":"3ce18a6379494f81b183ff09712c67fd","target_node_id":"0481412e6152484b9ff59a10fe44f981","id":"3f296c29ac8e49cb9b052e68b35e209e"},{"type":"Edge","source_node_id":"0481412e6152484b9ff59a10fe44f981","target_node_id":"8ad6ba88b08148619f4f0f133cd88a84","id":"53ef8bd6691347f8bf09313a425d6845"},{"type":"Edge","source_node_id":"da016b4266b448efb5fab4c127561362","target_node_id":"8d8c3ba65a1b48e59fefa81f6af9abad","id":"3dd5fe6739cb49a7b8a6d0d1aa4ad1e8"},{"type":"Edge","source_node_id":"8d8c3ba65a1b48e59fefa81f6af9abad","target_node_id":"ddec3a3a210c4c9b988b0b6962e8ad90","id":"ebb8c46b06414ab2ba41a59358c86590"},{"type":"Edge","source_node_id":"ddec3a3a210c4c9b988b0b6962e8ad90","target_node_id":"58c46b71b4834bae8f7a21401fc092fc","id":"cd664479dfef4e909fd6db041ef740f6"},{"type":"Edge","source_node_id":"543a3187f92f4e03848e26fee8acb00f","target_node_id":"7dce91b924a6498c86e6bc1253857566","id":"28751300bcb44e97a8598bc17b1ea252"},{"type":"Edge","source_node_id":"7dce91b924a6498c86e6bc1253857566","target_node_id":"9b22e12cf3e14eba810780ba11449455","branch_id":"54fd0f9fa66540c4b54c44f37f564712","id":"4cfad7aa72ef4f52952a29456bfe4587","name":"54fd0f9fa66540c4b54c44f37f564712"},{"type":"Edge","source_node_id":"7dce91b924a6498c86e6bc1253857566","target_node_id":"165a1bd573254bd883338b583112ab3a","branch_id":"69f72d8ffe0443e6938ce2cbd9d07d0b","id":"a1ed0fd5005e4de5ab8e21041ccdd701","name":"69f72d8ffe0443e6938ce2cbd9d07d0b"},{"type":"Edge","source_node_id":"165a1bd573254bd883338b583112ab3a","target_node_id":"88d3611b425f4bcbb2852753a69585f6","id":"d2ff478c105c40c4a61a0848b2fd532f"},{"type":"Edge","source_node_id":"88d3611b425f4bcbb2852753a69585f6","target_node_id":"a8991376ae65459092f66cf8adcd6352","id":"14e7ed480e6e4df6878624571f47115e"},{"type":"Edge","source_node_id":"a8991376ae65459092f66cf8adcd6352","target_node_id":"b3d5a15656164fd68dc0ccbd6da114be","id":"6a6998f8014a4e4ca35cbea675d3545f"},{"type":"Edge","source_node_id":"014d1eef83ce40249d50a80c84258933","target_node_id":"8499d4d549864b58a94713e7fa02977c","id":"1311f892e58a40c890c6320fbd05ff5d"},{"type":"Edge","source_node_id":"8499d4d549864b58a94713e7fa02977c","target_node_id":"1d44f24744844668a34e88d2fb0aec03","id":"c9f1b5f03373414687fe09d78e8f6518"},{"type":"Edge","source_node_id":"1d44f24744844668a34e88d2fb0aec03","target_node_id":"78aed9e578f540289dbc4fe396e90897","branch_id":"c500654830824b3381f0e371597d7e68","id":"963c71b5b2494d2896279084926e7fe1","name":"c500654830824b3381f0e371597d7e68"},{"type":"Edge","source_node_id":"1d44f24744844668a34e88d2fb0aec03","target_node_id":"a6a9e57fbd7f4853b35b40728bf0c1b3","branch_id":"fc3fbe3bf23c4b1ab4e08f8756ac761c","id":"3ab5f2190f1e4a5faa89073497207a29","name":"fc3fbe3bf23c4b1ab4e08f8756ac761c"},{"type":"Edge","source_node_id":"a6a9e57fbd7f4853b35b40728bf0c1b3","target_node_id":"8ad6ba88b08148619f4f0f133cd88a84","id":"ebed8ffa7f4b42a5b854768499e72e56"},{"type":"Edge","source_node_id":"5197185d7dde4e29ad21c903bf4461d5","target_node_id":"afe52e689ec5471495ad29f5e25d6657","branch_id":"8d271af03c4f4ce092c21729e243ac06","id":"95909123b7584023986261ea4f0a4aaf","name":"8d271af03c4f4ce092c21729e243ac06"},{"type":"Edge","source_node_id":"afe52e689ec5471495ad29f5e25d6657","target_node_id":"014d1eef83ce40249d50a80c84258933","branch_id":"33c61ba878b44bbfbb54fd26678635e4","id":"26eb12e3014f492585607a6e36ad542e","name":"33c61ba878b44bbfbb54fd26678635e4"},{"type":"Edge","source_node_id":"afe52e689ec5471495ad29f5e25d6657","target_node_id":"78aed9e578f540289dbc4fe396e90897","branch_id":"67a79ffe30c84f5ca15bc689456b0d32","id":"11724972f5eb46d6996e405317982dab","name":"67a79ffe30c84f5ca15bc689456b0d32"},{"type":"Edge","source_node_id":"58c46b71b4834bae8f7a21401fc092fc","target_node_id":"af73200e251349639110c03d95ac7d68","id":"ce05ca134c6e4da38b4573a98bce276c"},{"type":"Edge","source_node_id":"af73200e251349639110c03d95ac7d68","target_node_id":"543a3187f92f4e03848e26fee8acb00f","id":"b83b4adefe95417ab3c072236fe73e33"}],"id":"primary"}],"script_variables":[{"type":"String","name":"surveyInstanceId","value":{"type":"String","mode":"string"},"id":"3574da10e33e40668f570f7570f1027c","formatType":"text"},{"type":"String","name":"surveyQuestions","value":{"type":"String","mode":"string"},"id":"0cc8b7ffcf8d4b9f9c47e036f79ea48b","formatType":"text"},{"type":"String","name":"questionIndex","value":{"type":"String","mode":"string","value":"-1"},"id":"7ba2ee6813574a6780ce0431a0a2ba13","formatType":"text"},{"type":"String","name":"questionCount","value":{"type":"String","mode":"string","value":"0"},"id":"ee08946ee151463fb2ff28d0a1402196","formatType":"text"},{"type":"String","name":"surveyAnswers","value":{"type":"String","mode":"string","value":"{}"},"id":"c6e5588b47dc4fb0821a2479bf731907","formatType":"text"},{"type":"String","name":"choiceTypes","value":{"type":"String","mode":"string","value":"choice,scale,numericscale"},"id":"3f8d863d9bb7428d9452b5f83cf278c5","formatType":"text"},{"type":"String","name":"currentQuestionId","value":{"type":"String","mode":"string"},"id":"8b7ef81ef0af43a9937a7b200ef86a26","formatType":"text"},{"type":"String","name":"currentQuestionType","value":{"type":"String","mode":"string"},"id":"2c712ef8526b488682b91fbe41b09142","formatType":"text"},{"type":"String","name":"currentQuestionMetric","value":{"type":"String","mode":"string"},"id":"4eb44a112a484169b8e45b3b3e4a6686","formatType":"text"},{"type":"String","name":"currentQuestionDisplay","value":{"type":"String","mode":"string"},"id":"58a124e039ab4810bdd99c1bdbe6bf8c","formatType":"text"},{"type":"String","name":"introduction","value":{"type":"String","mode":"string"},"id":"2bf8a2ae591b48c3817950bee9951817","formatType":"text"},{"type":"String","name":"endNote","value":{"type":"String","mode":"string"},"id":"f045cffc7d274c44b2f659a39cb77cbe","formatType":"text"},{"type":"String","name":"textTypes","value":{"type":"String","mode":"string","value":"string,long,percentage"},"id":"28e766446b48464fa18feca8d957bd43","formatType":"text"},{"type":"String","name":"currentQuestionMax","value":{"type":"String","mode":"string"},"id":"ec8da91deb444b51a0d92a547484ab72","formatType":"text"},{"type":"String","name":"currentQuestionMin","value":{"type":"String","mode":"string"},"id":"9d5391c6280247a2b8d8c8adfdf01837","formatType":"text"},{"type":"String","name":"currentAnswerValidation","value":{"type":"String","mode":"string"},"id":"3bae95e8c3584023b1fefada56b7ef4f","formatType":"text"},{"type":"String","name":"currentAnswerErrorMsg","value":{"type":"String","mode":"string","value":""},"id":"7dfc702b1b6a4196893dfa4f165e4cb2","formatType":"text"},{"type":"String","name":"surveyVerificationMsg","value":{"type":"String","mode":"string"},"id":"d193fec885e14a9d83e289a5b3e51b34","formatType":"text"},{"type":"String","name":"currentQuestionMandatory","value":{"type":"String","mode":"string","value":"true"},"id":"97ea8b0fe348441488607bfacf21e1ae","formatType":"text"},{"type":"String","name":"_topic_postchat_user_id","value":{"type":"String","mode":"string"},"id":"300806ce2a44421ba8dd3189c95e9c53","formatType":"text"},{"type":"String","name":"surveyName","value":{"type":"String","mode":"string"},"id":"f2abecef0eab4beb9bc9dbe1f5028702","formatType":"text"},{"type":"String","name":"LiveAgent_pre_chat_survey_name","value":{"type":"String","mode":"string"},"id":"ba92fff2ee5a44879426b75cdb303cba","formatType":"text"},{"type":"String","name":"LiveAgent_post_chat_survey_name","value":{"type":"String","mode":"string"},"id":"da6d5cd90fa74f2f850fe4bd9e97504e","formatType":"text"},{"type":"String","name":"LiveAgent_pre_assessment_instance","value":{"type":"String","mode":"string"},"id":"b9cdf93c4dc24a54a347206707a6359b","formatType":"text"},{"type":"String","name":"LiveAgent_post_assessment_instance","value":{"type":"String","mode":"string"},"id":"789189eee2b8484d9bcff3b24c306a6d","formatType":"text"},{"type":"String","name":"defaultSurveyName","value":{"type":"String","mode":"string"},"id":"a9c3175f3788436a9a138a3b0c5dd6b7","formatType":"text"},{"type":"String","name":"currentQuestionFieldValidator","value":{"type":"String","mode":"string"},"id":"5738adf37b314856aee614e99424e337","formatType":"text"},{"type":"String","name":"currentQuestionReferenceTable","value":{"type":"String","mode":"string"},"id":"815bcdcd47d047ad924aa4e906f52d94","formatType":"text"},{"type":"String","name":"currentQuestionReferenceCondition","value":{"type":"String","mode":"string"},"id":"f86648af23ab4aadba29ce486ded117a","formatType":"text"}],"glide_variables":[{"type":"CarouselImage","id":"982d6af367684c1dbea91a849f8dcaa2","name":"show_image_scale_question","formatType":"text"},{"type":"String","name":"show_text_input_question","id":"e24e129250c249a9878a75139e035753","formatType":"Custom","validationScript":"function validate(value) {\n    // for \"skip\" which has input value as empty, long or percentage type, general string type with no validator defined\n    if ((gs.nil(value) &amp;&amp; vaVars.currentQuestionMandatory === 'false') || vaVars.currentQuestionType === 'long' || vaVars.currentQuestionType === 'percentage' || gs.nil(vaVars.currentQuestionFieldValidator))\n        return {\n            valid: true,\n        }; \n\n    // for string type with validator defined, and question is not skipped\n    var validatorGr = new GlideRecord(\"sys_cs_field_script_validator\");\n    if (!validatorGr.isValid())\n\t    return {\n           valid: false,\n           error: gs.getMessageLang(\"validator table does not exist\", vaContext.getRequesterLang())\n        };\n\n    if (validatorGr.get(vaVars.currentQuestionFieldValidator)) {\n        var scriptBuild = \"(\" + validatorGr.validator + \")('\"+ value + \"');\";\n        var isValidAnswer = eval(scriptBuild);\n        return {\n            valid: isValidAnswer,\n            error: isValidAnswer ? undefined : validatorGr.error_message + ''\n        };\n    } else {\n        return {\n            valid: false,\n            error: gs.getMessageLang(\"validator record does not exist\", vaContext.getRequesterLang())\n        };\n    }\n}"},{"type":"True/False","id":"f91b8c9e2b484a40a7e4b8154f62ed83","name":"show_boolean_question","formatType":"text"},{"type":"Choice","choices":[],"id":"e1deb8e0d30c437da28d9ab022dbaa9b","name":"show_choice_question","formatType":"text","table":""},{"type":"Image","id":"9efd17ecbb934cfabb036a317c61aa69","name":"show_attachment_question","formatType":"text"},{"type":"Date/Time","mode":"date","id":"861966c151804bb68836a40f308c932c","name":"show_date_question","formatType":"text"},{"type":"Date/Time","mode":"date_time","id":"0c01e42b8a384b0bb1e13df038d2da4a","name":"show_datetime_question","formatType":"text"},{"type":"String","name":"surveyid","id":"54e0b477bba048e18ebc708ec9d7bcc9","formatType":"text"},{"type":"True/False","id":"bad1065e16054a2da96f60afed9f86d8","name":"verify_response","formatType":"text"},{"type":"String","name":"confirmationneeded","id":"e1c17e6044774054b3770b5792b89241","formatType":"text"},{"type":"String","name":"savequestionstocontext","id":"3089b24235064409a7fe5013836626e9","formatType":"text"},{"type":"Reference","table":"sys_user","id":"82b371e4c15c458181330ba8c4acb2a7","name":"user","formatType":"text"},{"type":"Choice","choices":[],"id":"218c0a616e194cafb7901990e1be31c9","name":"show_reference_question","formatType":"text","table":""}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"4a28375b1bedec54ef5b635ee54bcba5","library-usage":{"type":"Library","input-parameters":[{"name":"surveyid","label":"surveyId","default-value":"","required":true,"id":"54e0b477bba048e18ebc708ec9d7bcc9"},{"name":"confirmationneeded","label":"confirmationNeeded","default-value":"false","required":true,"id":"e1c17e6044774054b3770b5792b89241"},{"name":"savequestionstocontext","label":"saveQuestionsToContext","default-value":"false","required":true,"id":"3089b24235064409a7fe5013836626e9"}],"return-values-mapping":[]},"domain":"global","topic_type":"TOPIC_BLOCK","channels":[],"id":"87e43fc41b42ac50122465fce54bcb2b","name":"Survey ABSA","key_phrases":[],"nlu_provider":"","nlu_model":"","nlu_model_label":"","nlu_intent":"","nlu_intent_label":"","flexible_conversation_switching":true,"design_category":"5628e7f27373230025d032e954f6a7de","library":true,"nluMapping":"[]"}</design_definition>
        <design_topic_id>87e43fc41b42ac50122465fce54bcb2b</design_topic_id>
        <name>Survey ABSA</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>michaela.govender</sys_created_by>
        <sys_created_on>2021-01-27 07:16:53</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>f905bb481b42ac50122465fce54bcb9f</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Absa HR NLU Models" source="x_absa2_absa_hr_nl">4a28375b1bedec54ef5b635ee54bcba5</sys_package>
        <sys_policy/>
        <sys_scope display_value="Absa HR NLU Models">4a28375b1bedec54ef5b635ee54bcba5</sys_scope>
        <sys_update_name>sys_cb_design_topic_f905bb481b42ac50122465fce54bcb9f</sys_update_name>
        <sys_updated_by>michaela.govender</sys_updated_by>
        <sys_updated_on>2021-01-27 11:04:03</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
