<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic">
    <sys_cb_topic action="DELETE">
        <applicability/>
        <applicability_mode>query</applicability_mode>
        <autopilot_topic>false</autopilot_topic>
        <category/>
        <channels/>
        <connect_queue/>
        <description/>
        <expose_on_palette>false</expose_on_palette>
        <flexible_conversation_switching>true</flexible_conversation_switching>
        <graph>{
  "graph_api_version": "1.0.36",
  "goals": {
    "primary": {
      "id": "primary",
      "trigger": {
        "type": "primary"
      },
      "name": "primary",
      "applicability": "",
      "description": "",
      "nodes": {
        "ae8e2b3ac8a94c10b765c2dad52e28a4": {
          "id": "ae8e2b3ac8a94c10b765c2dad52e28a4",
          "stepType": "Start",
          "name": "Start",
          "greetingResponse": {
            "mode": "simple",
            "value": ""
          }
        },
        "3b98cdbc71cd4a93aca7cd9c5681fe20": {
          "id": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "stepType": "TerminateGoal",
          "name": "End",
          "confirmationMessage": {
            "mode": "simple",
            "value": ""
          }
        },
        "e2d777f5944b4fe39e12a683e1d90500": {
          "id": "e2d777f5944b4fe39e12a683e1d90500",
          "name": "Conversation Builder",
          "script": "(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaVars.search_context_sys_id, vaInputs.query, vaInputs.kb_knowledge_base\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }\n\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 6, -2);\n    vaVars.searchResultCount = relevantSearchResults.length;\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\n    vaVars.index = 0;\n    return;\n})()",
          "stepType": "ScriptAction",
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "9015fb4951cb4e9985a897a715f1c0d4": {
          "id": "9015fb4951cb4e9985a897a715f1c0d4",
          "stepType": "Decision",
          "name": "Did the search return results?"
        },
        "3b4ab675feef4e5f83cf182786b32378": {
          "id": "3b4ab675feef4e5f83cf182786b32378",
          "stepType": "TextOutput",
          "name": "Found Information",
          "secure": false,
          "value": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "I found this information that might help you"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "8deb056266964f95a94b5824e27c98ea": {
          "stepType": "ReferenceChoicePrompt",
          "name": "Choose FAQ",
          "prompt": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "I found some information that might help you"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "confirmMessage": {
            "value": "",
            "mode": "simple"
          },
          "acknowledgeMsg": {
            "value": "",
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "skippable": {
            "value": "",
            "mode": "query"
          },
          "defaultValue": {
            "value": "",
            "mode": "simple"
          },
          "variableId": "5790ae968ef54ca4b6182953f697b4e4",
          "id": "8deb056266964f95a94b5824e27c98ea",
          "mode": "external",
          "script": "(function execute() {\n    var options = [];\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\n\n    for (i = 0; i &lt; searchJsonObj.length; i++) {\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\n    }\n\n    options.push({ 'value': '-1', 'label': 'I\\'m looking for something else' })\n\n    return options;\n})()\n",
          "metadataScript": "",
          "cardData": {},
          "noRecordsResponseMsg": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "No records found."
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "condition": {
            "value": "(function execute() {\n    var options = [];\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\n\n    for (i = 0; i &lt; searchJsonObj.length; i++) {\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\n    }\n\n    options.push({ 'value': '-1', 'label': 'I\\'m looking for something else' })\n\n    return options;\n})()\n",
            "mode": "external_script"
          },
          "hasCardHeader": false,
          "cardMetadata": {
            "mode": "card",
            "metadataScript": "",
            "cardTemplate": "",
            "cardFields": {},
            "cardDefinition": {}
          },
          "withNluUserInput": false,
          "skipIfFulfilled": false
        },
        "2e407c25ea094c74b494e8785414c5a2": {
          "id": "2e407c25ea094c74b494e8785414c5a2",
          "stepType": "Decision",
          "name": "Decision"
        },
        "2b5689e33cf946058b21debbf430fcce": {
          "id": "2b5689e33cf946058b21debbf430fcce",
          "stepType": "TextOutput",
          "name": "Display Articles",
          "secure": false,
          "value": {
            "value": "(function execute() {\n   // relevant properties to get record\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\n    var resultNumber = searchJsonObj[vaVars.selected_faq].meta.number;\n    gs.info('cw:resultNumber ' + resultNumber);\n\n    var faqUtil = new global.VAFaqUtil();\n    // build the header text\n    header_text =  faqUtil.buildHeaderText(resultNumber, vaVars.selected_type);\n    \n    header_text += '&lt;br&gt;&lt;br&gt;';\ngs.info('cw: vaVars.selected_faq:'  + vaVars.selected_faq);\n    var linkBuilder = new global.cxs_SearchResultLinkBuilder();\n    var link = linkBuilder.build(searchJsonObj[vaVars.selected_faq], vaInputs.portal);\ngs.info('cw: link.link' + link.link);\n    //header_text += '&lt;a href=\"'+link.link+'\" target=\"_blank\" &gt;'+ 'Read full article'+ '&lt;/a&gt;';\nheader_text += '&lt;a href=\"'+\"cep?id=kb_article_view&amp;sysparm_article=\" + resultNumber +'\" target=\"_blank\" &gt;'+ 'Read full article'+ '&lt;/a&gt;';\n   // &lt;p&gt;&lt;a href=\"cep?id=kb_article_view&amp;sysparm_article={{vaInputs.show_knowledge_blocks.number}}\" target=\"_blank\"&gt;More Details&lt;/a&gt;&lt;/p&gt;\n    //header_text += '[Read full article]('+link.link+')'\n    return header_text;\n})()\n",
            "mode": "script"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "92cd79ef057943dea49b148389628bc5": {
          "id": "92cd79ef057943dea49b148389628bc5",
          "stepType": "Prompt",
          "name": "Did Info Help",
          "prompt": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "Did this information help you?"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "confirmMessage": {
            "value": "",
            "mode": "simple"
          },
          "acknowledgeMsg": {
            "value": "",
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "skippable": {
            "value": "",
            "mode": "query"
          },
          "defaultValue": {
            "value": "",
            "mode": "simple"
          },
          "withNluUserInput": false,
          "skipIfFulfilled": false,
          "variableId": "e3f506ccef6b4dadadf54164f52611dc"
        },
        "d6e364d70de34bc5b793b21e608477f0": {
          "id": "d6e364d70de34bc5b793b21e608477f0",
          "name": "Record Outputs",
          "script": "(function execute() {\n    if(vaInputs.did_info_help == 'true') {\n        vaVars.results_helpful = true;\n    } else {\n        vaVars.results_helpful = false;\n    }\n})()\n",
          "stepType": "ScriptAction",
          "applicability": {
            "value": "",
            "mode": "query"
          }
        }
      },
      "edges": [
        {
          "id": "3031b3ab3f794798831fb6be090b8c28",
          "edgeType": "Edge",
          "source": "ae8e2b3ac8a94c10b765c2dad52e28a4",
          "target": "e2d777f5944b4fe39e12a683e1d90500",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "b8cc76e185a646538258c4e57ff651c9",
          "edgeType": "Edge",
          "source": "e2d777f5944b4fe39e12a683e1d90500",
          "target": "9015fb4951cb4e9985a897a715f1c0d4",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "b1216d572a2b4e3aace65070b12b4b7b",
          "edgeType": "Branch",
          "source": "9015fb4951cb4e9985a897a715f1c0d4",
          "target": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if (!(vaVars.searchResultCount &gt; 0)) {\n        vaVars.results_helpful = false;\n        vaVars.results_returned = false;\n        return true;\n    }\n    return false;\n\n})()"
          },
          "label": "No"
        },
        {
          "id": "f0b4119da7924d6ba0971de0e09153eb",
          "edgeType": "Branch",
          "source": "9015fb4951cb4e9985a897a715f1c0d4",
          "target": "3b4ab675feef4e5f83cf182786b32378",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if(vaVars.searchResultCount === 1) {\n        vaVars.results_returned = true;\n        vaVars.selected_faq = 0;\n        vaVars.selected_type = 'single';\n        return true;\n    }\n    return false;\n})()\n"
          },
          "label": "Found one"
        },
        {
          "id": "b98d0a93da484be4b97d12ed25af7166",
          "edgeType": "Branch",
          "source": "9015fb4951cb4e9985a897a715f1c0d4",
          "target": "8deb056266964f95a94b5824e27c98ea",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if(vaVars.searchResultCount &gt; 1) {\n        vaVars.results_returned = true;\n        return true;\n    }\n    return false;\n})()\n"
          },
          "label": "More than one"
        },
        {
          "id": "977ea34636cc4d1da3d0c6857cfd5f56",
          "edgeType": "Edge",
          "source": "8deb056266964f95a94b5824e27c98ea",
          "target": "2e407c25ea094c74b494e8785414c5a2",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "91e1ed2eeea24d639edf40b0a2f8c193",
          "edgeType": "Branch",
          "source": "2e407c25ea094c74b494e8785414c5a2",
          "target": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    return vaInputs.choose_faq.getValue() == '-1';\n})()\n"
          },
          "label": "Something else"
        },
        {
          "id": "a1212c43ee4b42c58bae636046136f8d",
          "edgeType": "Edge",
          "source": "3b4ab675feef4e5f83cf182786b32378",
          "target": "2b5689e33cf946058b21debbf430fcce",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "c50e5b8dfec14ee59e254e8b4483e5c2",
          "edgeType": "Edge",
          "source": "2b5689e33cf946058b21debbf430fcce",
          "target": "92cd79ef057943dea49b148389628bc5",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "c985da8bf326484a8b459b0c66488b98",
          "edgeType": "Edge",
          "source": "92cd79ef057943dea49b148389628bc5",
          "target": "d6e364d70de34bc5b793b21e608477f0",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "06a313153dcf4a96af10775146faa287",
          "edgeType": "Edge",
          "source": "d6e364d70de34bc5b793b21e608477f0",
          "target": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "47788d0934734504821a417e7a8756d9",
          "edgeType": "Branch",
          "source": "2e407c25ea094c74b494e8785414c5a2",
          "target": "2b5689e33cf946058b21debbf430fcce",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if (vaInputs.choose_faq.getValue() != '-1') {\n        // need parseInt because it was keeping decimals\n        vaVars.selected_faq = parseInt(vaInputs.choose_faq.getValue());\n        vaVars.selected_type = 'multi';\n        return true;\n    }\n    return false;\n})()\n"
          },
          "label": "Selected one"
        }
      ]
    }
  },
  "variables": {
    "current-user": {
      "category": "vaInputs",
      "id": "current-user",
      "label": "User",
      "name": "user",
      "table": "sys_user",
      "varType": "reference"
    },
    "5790ae968ef54ca4b6182953f697b4e4": {
      "id": "5790ae968ef54ca4b6182953f697b4e4",
      "name": "choose_faq",
      "label": "Choose FAQ",
      "varType": "reference",
      "table": "",
      "category": "vaInputs"
    },
    "e3f506ccef6b4dadadf54164f52611dc": {
      "id": "e3f506ccef6b4dadadf54164f52611dc",
      "name": "did_info_help",
      "label": "Did Info Help",
      "varType": "boolean",
      "secure": false,
      "category": "vaInputs"
    },
    "4cdad8704fdc45818befd2b0e3f0f77c": {
      "id": "4cdad8704fdc45818befd2b0e3f0f77c",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "DEBUG_JSON_RESULT",
      "label": "DEBUG_JSON_RESULT",
      "varType": "script",
      "category": "vaVars"
    },
    "d7f0d0e524774df8aa7943368d4b0421": {
      "id": "d7f0d0e524774df8aa7943368d4b0421",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "index",
      "label": "index",
      "varType": "script",
      "category": "vaVars"
    },
    "1921bfaf476f44f29793fea925600442": {
      "id": "1921bfaf476f44f29793fea925600442",
      "value": {
        "mode": "simple",
        "value": "3"
      },
      "name": "limit",
      "label": "limit",
      "varType": "script",
      "category": "vaVars"
    },
    "2e81ee4855a14d3786d2f61d4ecd4af9": {
      "id": "2e81ee4855a14d3786d2f61d4ecd4af9",
      "value": {
        "mode": "simple",
        "value": "false"
      },
      "name": "results_helpful",
      "label": "results_helpful",
      "varType": "script",
      "category": "vaVars"
    },
    "81ea8793c66547fab5340c680d572e4f": {
      "id": "81ea8793c66547fab5340c680d572e4f",
      "value": {
        "mode": "simple",
        "value": "false"
      },
      "name": "results_returned",
      "label": "results_returned",
      "varType": "script",
      "category": "vaVars"
    },
    "3e9d68ce25064c47b36834f9b98ef5f7": {
      "id": "3e9d68ce25064c47b36834f9b98ef5f7",
      "value": {
        "mode": "simple",
        "value": "0"
      },
      "name": "searchResultCount",
      "label": "searchResultCount",
      "varType": "script",
      "category": "vaVars"
    },
    "bdede904e12d4bb08cac18a0930fb4e2": {
      "id": "bdede904e12d4bb08cac18a0930fb4e2",
      "value": {
        "mode": "simple",
        "value": " 753c0f743b4290102c67667993efc459"
      },
      "name": "search_context_sys_id",
      "label": "search_context_sys_id",
      "varType": "script",
      "category": "vaVars"
    },
    "8055203065894ffc8190df76876984f2": {
      "id": "8055203065894ffc8190df76876984f2",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "search_result_json_string",
      "label": "search_result_json_string",
      "varType": "script",
      "category": "vaVars"
    },
    "be52cee4486d454baf40e8d957db765b": {
      "id": "be52cee4486d454baf40e8d957db765b",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "selected_faq",
      "label": "selected_faq",
      "varType": "script",
      "category": "vaVars"
    },
    "6f76f08d6abf449ab7d88d16daf6067e": {
      "id": "6f76f08d6abf449ab7d88d16daf6067e",
      "value": {
        "mode": "script",
        "value": "(function execute() {\n    return 'none';\n})()\n"
      },
      "name": "select_type",
      "label": "select_type",
      "varType": "script",
      "category": "vaVars"
    }
  }
}</graph>
        <key_phrases/>
        <library>true</library>
        <live_agent>false</live_agent>
        <name>KB Contextual Search</name>
        <nlu_intent/>
        <nlu_intent_label/>
        <nlu_model/>
        <nlu_model_label/>
        <nlu_provider/>
        <palette_label/>
        <roles/>
        <source_topic_id/>
        <sys_class_name>sys_cb_topic</sys_class_name>
        <sys_created_by>thabiso.diphare</sys_created_by>
        <sys_created_on>2022-09-12 10:20:56</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>7be5160f97bd1150fac1f386f053af4a</sys_id>
        <sys_mod_count>8</sys_mod_count>
        <sys_name>KB Contextual Search</sys_name>
        <sys_package display_value="Absa HR NLU Models" source="x_absa2_absa_hr_nl">4a28375b1bedec54ef5b635ee54bcba5</sys_package>
        <sys_policy/>
        <sys_scope display_value="Absa HR NLU Models">4a28375b1bedec54ef5b635ee54bcba5</sys_scope>
        <sys_update_name>sys_cb_topic_7be5160f97bd1150fac1f386f053af4a</sys_update_name>
        <sys_updated_by>thabiso.diphare</sys_updated_by>
        <sys_updated_on>2022-09-12 10:58:30</sys_updated_on>
        <triggerable_by_notification>false</triggerable_by_notification>
        <type>TOPIC_BLOCK</type>
        <variables/>
    </sys_cb_topic>
    <sys_variable_value action="DELETE" query="document_key=7be5160f97bd1150fac1f386f053af4a"/>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Absa HR NLU Models">4a28375b1bedec54ef5b635ee54bcba5</application>
        <file_path/>
        <instance_id>b3065e0edb486b4052e3f70fbf96193b</instance_id>
        <instance_name>absahrdev</instance_name>
        <name>sys_cb_topic_7be5160f97bd1150fac1f386f053af4a</name>
        <payload><![CDATA[<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_topic"><sys_cb_topic action="INSERT_OR_UPDATE"><applicability/><applicability_mode>query</applicability_mode><autopilot_topic>false</autopilot_topic><category/><channels/><connect_queue/><description/><expose_on_palette>false</expose_on_palette><flexible_conversation_switching>true</flexible_conversation_switching><graph>{
  "graph_api_version": "1.0.36",
  "goals": {
    "primary": {
      "id": "primary",
      "trigger": {
        "type": "primary"
      },
      "name": "primary",
      "applicability": "",
      "description": "",
      "nodes": {
        "ae8e2b3ac8a94c10b765c2dad52e28a4": {
          "id": "ae8e2b3ac8a94c10b765c2dad52e28a4",
          "stepType": "Start",
          "name": "Start",
          "greetingResponse": {
            "mode": "simple",
            "value": ""
          }
        },
        "3b98cdbc71cd4a93aca7cd9c5681fe20": {
          "id": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "stepType": "TerminateGoal",
          "name": "End",
          "confirmationMessage": {
            "mode": "simple",
            "value": ""
          }
        },
        "e2d777f5944b4fe39e12a683e1d90500": {
          "id": "e2d777f5944b4fe39e12a683e1d90500",
          "name": "Conversation Builder",
          "script": "(function execute() {\n    var contextualSearch = new global.VAGlobalContextualSearchUtil();\n    var response = contextualSearch.search(\n        vaVars.search_context_sys_id, vaInputs.query, vaInputs.kb_knowledge_base\n    );\n    var success = contextualSearch.processSearchResponse(response);\n    if (!success) {\n        return;\n    }\n\n    var relevantSearchResults = contextualSearch.processGeneralResults(response, 6, -2);\n    vaVars.searchResultCount = relevantSearchResults.length;\n    vaVars.search_result_json_string = JSON.stringify(relevantSearchResults);\n    vaVars.index = 0;\n    return;\n})()",
          "stepType": "ScriptAction",
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "9015fb4951cb4e9985a897a715f1c0d4": {
          "id": "9015fb4951cb4e9985a897a715f1c0d4",
          "stepType": "Decision",
          "name": "Did the search return results?"
        },
        "3b4ab675feef4e5f83cf182786b32378": {
          "id": "3b4ab675feef4e5f83cf182786b32378",
          "stepType": "TextOutput",
          "name": "Found Information",
          "secure": false,
          "value": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "I found this information that might help you"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "8deb056266964f95a94b5824e27c98ea": {
          "stepType": "ReferenceChoicePrompt",
          "name": "Choose FAQ",
          "prompt": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "I found some information that might help you"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "confirmMessage": {
            "value": "",
            "mode": "simple"
          },
          "acknowledgeMsg": {
            "value": "",
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "skippable": {
            "value": "",
            "mode": "query"
          },
          "defaultValue": {
            "value": "",
            "mode": "simple"
          },
          "variableId": "5790ae968ef54ca4b6182953f697b4e4",
          "id": "8deb056266964f95a94b5824e27c98ea",
          "mode": "external",
          "script": "(function execute() {\n    var options = [];\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\n\n    for (i = 0; i &lt; searchJsonObj.length; i++) {\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\n    }\n\n    options.push({ 'value': '-1', 'label': 'I\\'m looking for something else' })\n\n    return options;\n})()\n",
          "metadataScript": "",
          "cardData": {},
          "noRecordsResponseMsg": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "No records found."
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "condition": {
            "value": "(function execute() {\n    var options = [];\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\n\n    for (i = 0; i &lt; searchJsonObj.length; i++) {\n        options.push({ 'value': i, 'label': searchJsonObj[i].title });\n    }\n\n    options.push({ 'value': '-1', 'label': 'I\\'m looking for something else' })\n\n    return options;\n})()\n",
            "mode": "external_script"
          },
          "hasCardHeader": false,
          "cardMetadata": {
            "mode": "card",
            "metadataScript": "",
            "cardTemplate": "",
            "cardFields": {},
            "cardDefinition": {}
          },
          "withNluUserInput": false,
          "skipIfFulfilled": false
        },
        "2e407c25ea094c74b494e8785414c5a2": {
          "id": "2e407c25ea094c74b494e8785414c5a2",
          "stepType": "Decision",
          "name": "Decision"
        },
        "2b5689e33cf946058b21debbf430fcce": {
          "id": "2b5689e33cf946058b21debbf430fcce",
          "stepType": "TextOutput",
          "name": "Display Articles",
          "secure": false,
          "value": {
            "value": "(function execute() {\n   // relevant properties to get record\n    var searchJsonObj = JSON.parse(vaVars.search_result_json_string);\n    var resultNumber = searchJsonObj[vaVars.selected_faq].meta.number;\n    gs.info('cw:resultNumber ' + resultNumber);\n\n    var faqUtil = new global.VAFaqUtil();\n    // build the header text\n    header_text =  faqUtil.buildHeaderText(resultNumber, vaVars.selected_type);\n    \n    header_text += '&lt;br&gt;&lt;br&gt;';\ngs.info('cw: vaVars.selected_faq:'  + vaVars.selected_faq);\n    var linkBuilder = new global.cxs_SearchResultLinkBuilder();\n    var link = linkBuilder.build(searchJsonObj[vaVars.selected_faq], vaInputs.portal);\ngs.info('cw: link.link' + link.link);\n    //header_text += '&lt;a href=\"'+link.link+'\" target=\"_blank\" &gt;'+ 'Read full article'+ '&lt;/a&gt;';\nheader_text += '&lt;a href=\"'+\"cep?id=kb_article_view&amp;sysparm_article=\" + resultNumber +'\" target=\"_blank\" &gt;'+ 'Read full article'+ '&lt;/a&gt;';\n   // &lt;p&gt;&lt;a href=\"cep?id=kb_article_view&amp;sysparm_article={{vaInputs.show_knowledge_blocks.number}}\" target=\"_blank\"&gt;More Details&lt;/a&gt;&lt;/p&gt;\n    //header_text += '[Read full article]('+link.link+')'\n    return header_text;\n})()\n",
            "mode": "script"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          }
        },
        "92cd79ef057943dea49b148389628bc5": {
          "id": "92cd79ef057943dea49b148389628bc5",
          "stepType": "Prompt",
          "name": "Did Info Help",
          "prompt": {
            "value": [
              {
                "type": "paragraph",
                "children": [
                  {
                    "text": "Did this information help you?"
                  }
                ]
              }
            ],
            "mode": "simple"
          },
          "confirmMessage": {
            "value": "",
            "mode": "simple"
          },
          "acknowledgeMsg": {
            "value": "",
            "mode": "simple"
          },
          "applicability": {
            "value": "",
            "mode": "query"
          },
          "skippable": {
            "value": "",
            "mode": "query"
          },
          "defaultValue": {
            "value": "",
            "mode": "simple"
          },
          "withNluUserInput": false,
          "skipIfFulfilled": false,
          "variableId": "e3f506ccef6b4dadadf54164f52611dc"
        },
        "d6e364d70de34bc5b793b21e608477f0": {
          "id": "d6e364d70de34bc5b793b21e608477f0",
          "name": "Record Outputs",
          "script": "(function execute() {\n    if(vaInputs.did_info_help == 'true') {\n        vaVars.results_helpful = true;\n    } else {\n        vaVars.results_helpful = false;\n    }\n})()\n",
          "stepType": "ScriptAction",
          "applicability": {
            "value": "",
            "mode": "query"
          }
        }
      },
      "edges": [
        {
          "id": "3031b3ab3f794798831fb6be090b8c28",
          "edgeType": "Edge",
          "source": "ae8e2b3ac8a94c10b765c2dad52e28a4",
          "target": "e2d777f5944b4fe39e12a683e1d90500",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "b8cc76e185a646538258c4e57ff651c9",
          "edgeType": "Edge",
          "source": "e2d777f5944b4fe39e12a683e1d90500",
          "target": "9015fb4951cb4e9985a897a715f1c0d4",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "b1216d572a2b4e3aace65070b12b4b7b",
          "edgeType": "Branch",
          "source": "9015fb4951cb4e9985a897a715f1c0d4",
          "target": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if (!(vaVars.searchResultCount &gt; 0)) {\n        vaVars.results_helpful = false;\n        vaVars.results_returned = false;\n        return true;\n    }\n    return false;\n\n})()"
          },
          "label": "No"
        },
        {
          "id": "f0b4119da7924d6ba0971de0e09153eb",
          "edgeType": "Branch",
          "source": "9015fb4951cb4e9985a897a715f1c0d4",
          "target": "3b4ab675feef4e5f83cf182786b32378",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if(vaVars.searchResultCount === 1) {\n        vaVars.results_returned = true;\n        vaVars.selected_faq = 0;\n        vaVars.selected_type = 'single';\n        return true;\n    }\n    return false;\n})()\n"
          },
          "label": "Found one"
        },
        {
          "id": "b98d0a93da484be4b97d12ed25af7166",
          "edgeType": "Branch",
          "source": "9015fb4951cb4e9985a897a715f1c0d4",
          "target": "8deb056266964f95a94b5824e27c98ea",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if(vaVars.searchResultCount &gt; 1) {\n        vaVars.results_returned = true;\n        return true;\n    }\n    return false;\n})()\n"
          },
          "label": "More than one"
        },
        {
          "id": "977ea34636cc4d1da3d0c6857cfd5f56",
          "edgeType": "Edge",
          "source": "8deb056266964f95a94b5824e27c98ea",
          "target": "2e407c25ea094c74b494e8785414c5a2",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "91e1ed2eeea24d639edf40b0a2f8c193",
          "edgeType": "Branch",
          "source": "2e407c25ea094c74b494e8785414c5a2",
          "target": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    return vaInputs.choose_faq.getValue() == '-1';\n})()\n"
          },
          "label": "Something else"
        },
        {
          "id": "a1212c43ee4b42c58bae636046136f8d",
          "edgeType": "Edge",
          "source": "3b4ab675feef4e5f83cf182786b32378",
          "target": "2b5689e33cf946058b21debbf430fcce",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "c50e5b8dfec14ee59e254e8b4483e5c2",
          "edgeType": "Edge",
          "source": "2b5689e33cf946058b21debbf430fcce",
          "target": "92cd79ef057943dea49b148389628bc5",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "c985da8bf326484a8b459b0c66488b98",
          "edgeType": "Edge",
          "source": "92cd79ef057943dea49b148389628bc5",
          "target": "d6e364d70de34bc5b793b21e608477f0",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "06a313153dcf4a96af10775146faa287",
          "edgeType": "Edge",
          "source": "d6e364d70de34bc5b793b21e608477f0",
          "target": "3b98cdbc71cd4a93aca7cd9c5681fe20",
          "sourcePort": "",
          "targetPort": ""
        },
        {
          "id": "47788d0934734504821a417e7a8756d9",
          "edgeType": "Branch",
          "source": "2e407c25ea094c74b494e8785414c5a2",
          "target": "2b5689e33cf946058b21debbf430fcce",
          "sourcePort": "",
          "targetPort": "",
          "expression": {
            "mode": "script",
            "value": "(function execute() {\n    if (vaInputs.choose_faq.getValue() != '-1') {\n        // need parseInt because it was keeping decimals\n        vaVars.selected_faq = parseInt(vaInputs.choose_faq.getValue());\n        vaVars.selected_type = 'multi';\n        return true;\n    }\n    return false;\n})()\n"
          },
          "label": "Selected one"
        }
      ]
    }
  },
  "variables": {
    "current-user": {
      "category": "vaInputs",
      "id": "current-user",
      "label": "User",
      "name": "user",
      "table": "sys_user",
      "varType": "reference"
    },
    "5790ae968ef54ca4b6182953f697b4e4": {
      "id": "5790ae968ef54ca4b6182953f697b4e4",
      "name": "choose_faq",
      "label": "Choose FAQ",
      "varType": "reference",
      "table": "",
      "category": "vaInputs"
    },
    "e3f506ccef6b4dadadf54164f52611dc": {
      "id": "e3f506ccef6b4dadadf54164f52611dc",
      "name": "did_info_help",
      "label": "Did Info Help",
      "varType": "boolean",
      "secure": false,
      "category": "vaInputs"
    },
    "4cdad8704fdc45818befd2b0e3f0f77c": {
      "id": "4cdad8704fdc45818befd2b0e3f0f77c",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "DEBUG_JSON_RESULT",
      "label": "DEBUG_JSON_RESULT",
      "varType": "script",
      "category": "vaVars"
    },
    "d7f0d0e524774df8aa7943368d4b0421": {
      "id": "d7f0d0e524774df8aa7943368d4b0421",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "index",
      "label": "index",
      "varType": "script",
      "category": "vaVars"
    },
    "1921bfaf476f44f29793fea925600442": {
      "id": "1921bfaf476f44f29793fea925600442",
      "value": {
        "mode": "simple",
        "value": "3"
      },
      "name": "limit",
      "label": "limit",
      "varType": "script",
      "category": "vaVars"
    },
    "2e81ee4855a14d3786d2f61d4ecd4af9": {
      "id": "2e81ee4855a14d3786d2f61d4ecd4af9",
      "value": {
        "mode": "simple",
        "value": "false"
      },
      "name": "results_helpful",
      "label": "results_helpful",
      "varType": "script",
      "category": "vaVars"
    },
    "81ea8793c66547fab5340c680d572e4f": {
      "id": "81ea8793c66547fab5340c680d572e4f",
      "value": {
        "mode": "simple",
        "value": "false"
      },
      "name": "results_returned",
      "label": "results_returned",
      "varType": "script",
      "category": "vaVars"
    },
    "3e9d68ce25064c47b36834f9b98ef5f7": {
      "id": "3e9d68ce25064c47b36834f9b98ef5f7",
      "value": {
        "mode": "simple",
        "value": "0"
      },
      "name": "searchResultCount",
      "label": "searchResultCount",
      "varType": "script",
      "category": "vaVars"
    },
    "bdede904e12d4bb08cac18a0930fb4e2": {
      "id": "bdede904e12d4bb08cac18a0930fb4e2",
      "value": {
        "mode": "simple",
        "value": " 753c0f743b4290102c67667993efc459"
      },
      "name": "search_context_sys_id",
      "label": "search_context_sys_id",
      "varType": "script",
      "category": "vaVars"
    },
    "8055203065894ffc8190df76876984f2": {
      "id": "8055203065894ffc8190df76876984f2",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "search_result_json_string",
      "label": "search_result_json_string",
      "varType": "script",
      "category": "vaVars"
    },
    "be52cee4486d454baf40e8d957db765b": {
      "id": "be52cee4486d454baf40e8d957db765b",
      "value": {
        "value": "",
        "mode": "simple"
      },
      "name": "selected_faq",
      "label": "selected_faq",
      "varType": "script",
      "category": "vaVars"
    },
    "6f76f08d6abf449ab7d88d16daf6067e": {
      "id": "6f76f08d6abf449ab7d88d16daf6067e",
      "value": {
        "mode": "script",
        "value": "(function execute() {\n    return 'none';\n})()\n"
      },
      "name": "select_type",
      "label": "select_type",
      "varType": "script",
      "category": "vaVars"
    }
  }
}</graph><key_phrases/><library>true</library><live_agent>false</live_agent><name>KB Contextual Search</name><nlu_intent/><nlu_intent_label/><nlu_model/><nlu_model_label/><nlu_provider/><palette_label/><roles/><source_topic_id/><sys_class_name>sys_cb_topic</sys_class_name><sys_created_by>thabiso.diphare</sys_created_by><sys_created_on>2022-09-12 10:20:56</sys_created_on><sys_domain>global</sys_domain><sys_id>7be5160f97bd1150fac1f386f053af4a</sys_id><sys_mod_count>8</sys_mod_count><sys_name>KB Contextual Search</sys_name><sys_package display_value="Absa HR NLU Models" source="x_absa2_absa_hr_nl">4a28375b1bedec54ef5b635ee54bcba5</sys_package><sys_policy/><sys_scope display_value="Absa HR NLU Models">4a28375b1bedec54ef5b635ee54bcba5</sys_scope><sys_update_name>sys_cb_topic_7be5160f97bd1150fac1f386f053af4a</sys_update_name><sys_updated_by>thabiso.diphare</sys_updated_by><sys_updated_on>2022-09-12 10:58:30</sys_updated_on><triggerable_by_notification>false</triggerable_by_notification><type>TOPIC_BLOCK</type><variables/></sys_cb_topic><sys_variable_value action="delete_multiple" query="document_key=7be5160f97bd1150fac1f386f053af4a"/></record_update>]]></payload>
        <payload_hash>-115778550</payload_hash>
        <record_name>KB Contextual Search</record_name>
        <reverted_from/>
        <source>3f3d971f87db3050c386fd99cebb3565</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>thabiso.diphare</sys_created_by>
        <sys_created_on>2022-09-12 10:58:30</sys_created_on>
        <sys_id>318e524387f15150c386fd99cebb357a</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>1833159c4500000001</sys_recorded_at>
        <sys_updated_by>thabiso.diphare</sys_updated_by>
        <sys_updated_on>2022-09-12 10:58:30</sys_updated_on>
        <type>Topic</type>
        <update_guid>f58e5243e0f151505e8730201af28979</update_guid>
        <update_guid_history>f58e5243e0f151505e8730201af28979:-115778550,07f9560f16b15150619a615e2f4e9533:898999349,e1c99a032df1515036796102184d0872:442191057,dd991acb80b15150ef9c1b7c035700b6:1299046707,d939da0fbcb151505618c5a4d201261d:223619692,f4e81a4f15b15150dbb0e697eee2b085:82917641,6c771a4f2cb151506c35286ffa25807e:-1889709863,7cf5560f63bd11509378141b2cbc06dc:-1920617321,7fe51e0fa7bd1150249bd5501cb412bf:-20499570</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete/>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>thabiso.diphare</sys_created_by>
        <sys_created_on>2022-09-17 13:30:03</sys_created_on>
        <sys_db_object display_value="" name="sys_cb_topic">sys_cb_topic</sys_db_object>
        <sys_id>08232faa29af4da48643b805b3c91e90</sys_id>
        <sys_metadata>7be5160f97bd1150fac1f386f053af4a</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>KB Contextual Search</sys_name>
        <sys_package display_value="Absa HR NLU Models" source="x_absa2_absa_hr_nl">4a28375b1bedec54ef5b635ee54bcba5</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="Absa HR NLU Models">4a28375b1bedec54ef5b635ee54bcba5</sys_scope>
        <sys_scope_delete display_value="">3da79fd4d6714547bf3d1f765703ed69</sys_scope_delete>
        <sys_update_name>sys_cb_topic_7be5160f97bd1150fac1f386f053af4a</sys_update_name>
        <sys_update_version display_value="sys_cb_topic_7be5160f97bd1150fac1f386f053af4a">318e524387f15150c386fd99cebb357a</sys_update_version>
        <sys_updated_by>thabiso.diphare</sys_updated_by>
        <sys_updated_on>2022-09-17 13:30:03</sys_updated_on>
    </sys_metadata_delete>
</record_update>
